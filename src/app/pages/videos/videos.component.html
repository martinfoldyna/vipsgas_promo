<div class="row" *ngIf="authService.getUser()">
  <div class="col-md-8 m-auto">
    <nb-card [nbSpinner]="uploadingVideo" nbSpinnerStatus="primary" nbSpinnerMessage="Nahrávám video..">
      <nb-card-header>Přidat příspěvek</nb-card-header>
      <nb-card-body>
        <form #form>
          <div class="form-group">
            <label for="post-title" class="label">Název příspěvku</label>
            <input type="text" nbInput id="post-title" name="post-title" fullWidth placeholder="Název příspěvku" required [(ngModel)]="video.title">
          </div>
          <div class="form-group">
            <label for="post-title" class="label">Odkaz na video</label>
            <input type="url" nbInput id="post-url" name="post-url" fullWidth placeholder="Odkaz na video" required [(ngModel)]="video.url">
          </div>
          <div class="form-group">
            <label for="post-title" class="label">Náhledový obrázek</label><br>
            <input type="file" nbInput (change)="onFileChange($event)" required>
          </div>
          <div class="form-group">
            <label class="label" for="post-video-platform">Platforma videa</label><br>
            <nb-select name="post-video-platform" id="post-video-platform" placeholder="Vyberte platformu videa" [(ngModel)]="video.platform" required>
              <nb-option value="youtube">YouTube</nb-option>
              <nb-option value="vimeo">Vimeo</nb-option>
              <nb-option value="dailymotion">Dailymotion</nb-option>
            </nb-select>
          </div>
          <button nbButton fullWidth (click)="uploadVideo()">
            Odeslat
          </button>
        </form>
      </nb-card-body>
    </nb-card>
  </div>
</div>
<div class="row">
  <div class="col-md-4" *ngFor="let video of allVideos">
    <nb-card style="overflow: hidden" class="scale">
      <nb-card-header style="padding: 0;">
        <div class="thumbnail position-relative" [ngStyle]="{'background-image': 'linear-gradient(black, black), url(' + video.thumbnail.src + ')'}" style="width: 100%; height: 40vh; background-position: center; background-repeat: no-repeat; background-size: cover">
          <div class="overlay"></div>
          <nb-icon icon="play-circle-outline" class="position-absolute" status="primary"></nb-icon>
        </div>
      </nb-card-header>
      <nb-card-footer *ngIf="!authService.getUser()">
        <div class="d-flex justify-content-between">
          <div>
            <h3>{{video.title}}</h3>
            <nb-user [name]="video.createdBy.name ? video.createdBy.name : video.createdBy.email"></nb-user>
          </div>
          <button nbButton status="danger" (click)="deleteVideo(video.id)" *ngIf="authService.getUser()">
            <nb-icon icon="trash-2-outline"></nb-icon>
          </button>
        </div>

      </nb-card-footer>
    </nb-card>
  </div>
</div>
